{% extends "base.html" %}

{% block title %}é¡§å®¢ç®¡ç† - ç‰©è²©ç®¡ç†ãƒ„ãƒ¼ãƒ«{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- ãƒ©ãƒ³ã‚¯åˆ¥ã‚«ãƒ¼ãƒ‰ -->
    <div class="rank-cards">
        <div class="rank-card rank-platinum" onclick="location.href='{{ url_for('customers_list', rank='platinum') }}'">
            <span class="rank-icon">ğŸ’</span>
            <div class="rank-info">
                <span class="rank-label">ãƒ—ãƒ©ãƒãƒŠ</span>
                <span class="rank-count">{{ rank_counts.platinum }}äºº</span>
            </div>
            <span class="rank-threshold">Â¥{{ "{:,}".format(rank_thresholds.platinum) }}ã€œ</span>
        </div>
        <div class="rank-card rank-gold" onclick="location.href='{{ url_for('customers_list', rank='gold') }}'">
            <span class="rank-icon">ğŸ¥‡</span>
            <div class="rank-info">
                <span class="rank-label">ã‚´ãƒ¼ãƒ«ãƒ‰</span>
                <span class="rank-count">{{ rank_counts.gold }}äºº</span>
            </div>
            <span class="rank-threshold">Â¥{{ "{:,}".format(rank_thresholds.gold) }}ã€œ</span>
        </div>
        <div class="rank-card rank-silver" onclick="location.href='{{ url_for('customers_list', rank='silver') }}'">
            <span class="rank-icon">ğŸ¥ˆ</span>
            <div class="rank-info">
                <span class="rank-label">ã‚·ãƒ«ãƒãƒ¼</span>
                <span class="rank-count">{{ rank_counts.silver }}äºº</span>
            </div>
            <span class="rank-threshold">Â¥{{ "{:,}".format(rank_thresholds.silver) }}ã€œ</span>
        </div>
        <div class="rank-card rank-bronze" onclick="location.href='{{ url_for('customers_list', rank='bronze') }}'">
            <span class="rank-icon">ğŸ¥‰</span>
            <div class="rank-info">
                <span class="rank-label">ãƒ–ãƒ­ãƒ³ã‚º</span>
                <span class="rank-count">{{ rank_counts.bronze }}äºº</span>
            </div>
            <span class="rank-threshold">Â¥0ã€œ</span>
        </div>
    </div>
    
    <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
    <div class="filter-section">
        <form action="{{ url_for('customers_list') }}" method="get" class="search-form">
            <input type="text" name="search" value="{{ search }}" placeholder="é¡§å®¢åã§æ¤œç´¢..." class="search-input">
            <button type="submit" class="btn btn-search">æ¤œç´¢</button>
        </form>
        
        <div class="filter-buttons">
            <a href="{{ url_for('customers_list', rank='all') }}" class="filter-btn {% if rank_filter == 'all' %}active{% endif %}">å…¨ã¦</a>
            <a href="{{ url_for('customers_list', rank='platinum') }}" class="filter-btn {% if rank_filter == 'platinum' %}active{% endif %}">ğŸ’ ãƒ—ãƒ©ãƒãƒŠ</a>
            <a href="{{ url_for('customers_list', rank='gold') }}" class="filter-btn {% if rank_filter == 'gold' %}active{% endif %}">ğŸ¥‡ ã‚´ãƒ¼ãƒ«ãƒ‰</a>
            <a href="{{ url_for('customers_list', rank='silver') }}" class="filter-btn {% if rank_filter == 'silver' %}active{% endif %}">ğŸ¥ˆ ã‚·ãƒ«ãƒãƒ¼</a>
            <a href="{{ url_for('customers_list', rank='bronze') }}" class="filter-btn {% if rank_filter == 'bronze' %}active{% endif %}">ğŸ¥‰ ãƒ–ãƒ­ãƒ³ã‚º</a>
        </div>
        
        <div class="action-buttons">
            <a href="{{ url_for('add_customer') }}" class="btn btn-primary">+ é¡§å®¢ç™»éŒ²</a>
        </div>
    </div>
    
    <!-- é¡§å®¢ãƒªã‚¹ãƒˆ -->
    <div class="customers-list">
        {% if customers %}
            {% for customer in customers %}
                <div class="customer-card" onclick="location.href='{{ url_for('view_customer', id=customer.id) }}'">
                    <div class="customer-rank-badge rank-{{ customer.rank }}">
                        {% if customer.rank == 'platinum' %}ğŸ’
                        {% elif customer.rank == 'gold' %}ğŸ¥‡
                        {% elif customer.rank == 'silver' %}ğŸ¥ˆ
                        {% else %}ğŸ¥‰{% endif %}
                        {{ customer.rank_name }}
                    </div>
                    <div class="customer-info">
                        <h3 class="customer-name">{{ customer.name }}</h3>
                        <div class="customer-contact">
                            {% if customer.email %}<span>ğŸ“§ {{ customer.email }}</span>{% endif %}
                            {% if customer.phone %}<span>ğŸ“± {{ customer.phone }}</span>{% endif %}
                        </div>
                        <div class="customer-stats">
                            <span class="stat">è³¼å…¥å›æ•°: <strong>{{ customer.purchase_count }}å›</strong></span>
                            <span class="stat">ç´¯è¨ˆè³¼å…¥: <strong>Â¥{{ "{:,.0f}".format(customer.total_purchase) }}</strong></span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <span class="empty-icon">ğŸ‘¥</span>
                <p>é¡§å®¢ãŒã„ã¾ã›ã‚“</p>
                <a href="{{ url_for('add_customer') }}" class="btn btn-primary">æœ€åˆã®é¡§å®¢ã‚’ç™»éŒ²</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

